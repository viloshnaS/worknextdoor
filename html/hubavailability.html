
<!DOCTYPE html>
<html>

<head>

   
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/booking.css">
    <link rel="stylesheet" href="css/common.css">
    <script src="js/script.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
  	<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
   	<link rel="stylesheet" href="css/datepicker.css" type="text/css"/>
   	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile.structure-1.5.0-alpha.1.min.css">
   	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<script>

		$(document).ready(function(){


             $.urlParam = function(name){
                var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
                return results[1] || 0;
            }

            var hub_id = $.urlParam('hub_id');


			var selected_dates = [];

		$(".datepicker").datepicker({
            showOtherMonths: true,
            dayNamesMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
            numberOfMonths: [1,2],
            minDate:new Date(),
			beforeShowDay: function(date) {
				var date1 = $.datepicker.parseDate($.datepicker._defaults.dateFormat, $("#date_from").val());
				var date2 = $.datepicker.parseDate($.datepicker._defaults.dateFormat, $("#date_to").val());
				return [true, date1 && ((date.getTime() == date1.getTime()) || (date2 && date >= date1 && date <= date2)) ? "dp-highlight" : ""];
			},
			onSelect: function(dateText, inst) {
				var date1 = $.datepicker.parseDate($.datepicker._defaults.dateFormat, $("#date_from").val());
				var date2 = $.datepicker.parseDate($.datepicker._defaults.dateFormat, $("#date_to").val());
				if (!date1 || date2) {
					$("#date_from").val(dateText);
					$("#date_to").val("");
                    $(this).datepicker();
				} else {
					$("#date_to").val(dateText);
                    $(this).datepicker();
				}
			}
		});


 		$("#back").click(function(){
            history.back();
          
          });

          $("#home").click(function(){
            window.location="index.html";
          
          });

          $("#add_btn").click(function(){
          		var jsonObj = { "date_start": $( "#date_from" ).val(), "date_end":$( "#date_to" ).val()};

              var res = $("#date_display").html();
              res = res + "<br/>";
              res = res + $( "#date_from" ).val()+" to " + $( "#date_to" ).val() ;
              $("#date_display").html(res);
          
            	selected_dates.push(jsonObj);
          
          });

          $("#save_btn").click(function(){
            	addHubAvailability(hub_id,JSON.stringify(selected_dates));
          
          });

});

</script>
<link rel="stylesheet" href="css/availability.css">
</head>

<body>

<div id="back"><i class='material-icons'>arrow_back</i></div>
    <div id="home"><i class='material-icons'>home</i></div>
<table>


	<tr>
		<td><input type="hidden" id="date_from" size="10"></td>
	</tr>
	<tr>

		<td><input type="hidden" id="date_to" size="10"></td>
	</tr>
	<tr>
		<td><div class="datepicker"></div></td>
	</tr>
	<tr>
		<td><div id="add_btn"><i class='material-icons'>add_box</i></div></td>
		<td><button id="save_btn">Save</button></td>
	</tr>
</table>
	 
   <div id="date_display"></div>

</body>



</html>